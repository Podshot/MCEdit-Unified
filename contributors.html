<!DOCTYPE html>
<html lang="en-US">
<head>
	<title>MCEdit Unified</title>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/scripts.js"></script>
	<script src="js/marked.js"></script>

	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/font-awesome.min.css">
	<link rel="stylesheet" href="css/stylesheet.css">
	<link rel="shortcut icon" href="favicon.ico">

	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-57749723-1', 'auto');
		ga('send', 'pageview');
	</script>

	<!-- Looks for outdated IE browsers -->
	<!--[if lte IE 9]>
		<p class="update">Hey, it looks like you are using an old browser, you can go to <a href="http://browsehappy.com/">Browsehappy.com</a> to get the latest version of your browser and others.</p>
		<[endif]
	-->
	<style>
		.circle {
			border-radius: 50%;
			width: 12px;
			height: 12px;
			position: absolute;
			right: 19px;
			top: 4px;
			border: 1px solid white;
			border-top-right-radius: 0px;
		}
		.contrib-success {
			background-color: green;
		}
		.contrib-danger {
			background-color: red;
		}
		.contrib-old {
			background-color: orange;
		}
	</style>
	<script>
		function pageTrigger() {
			var contributors = getJSON('https://api.github.com/repos/Khroki/MCEdit-Unified/contributors');
			var totalContributions = 0;
			for (var i = 0; i < contributors.length; i++) {
				totalContributions += contributors[i].contributions;
			}
			var contributorDB = getJSON('contributors.json');
			for (var i = 0; i < contributors.length; i++) {
				var contributor = contributors[i];
				contributorDiv = '<a href="http://github.com/' + contributor.login + '"><i class="fa fa-github"></i></a> ';
				contributorDiv += '<a href="https://github.com/Khroki/MCEdit-Unified/commits?author=' + contributor.login + '"><i class="fa fa-code"></i></a> ';

				var webcheck = false;

				if (contributorDB[contributor.login]) {
					if (contributorDB[contributor.login].twitter) {
						contributorDiv += '<a href="http://twitter.com/' + contributorDB[contributor.login].twitter + '"><i class="fa fa-twitter"></i></a> ';
					}
					if (contributorDB[contributor.login].youtube) {
						contributorDiv += '<a href="http://youtube.com/' + contributorDB[contributor.login].youtube + '"><i class="fa fa-youtube"></i></a> ';
					}
					if (contributorDB[contributor.login].reddit) {
						contributorDiv += '<a href="http://reddit.com/u/' + contributorDB[contributor.login].reddit + '"><i class="fa fa-reddit"></i></a> ';
					}
					if (contributorDB[contributor.login].facebook) {
						contributorDiv += '<a href="http://facebook.com/' + contributorDB[contributor.login].facebook + '"><i class="fa fa-facebook"></i></a> ';
					}
					if (contributorDB[contributor.login].payment) {
						contributorDiv += '<a href="' + contributorDB[contributor.login].payment + '"><i class="fa fa-usd"></i></a> ';
					}
					if (contributorDB[contributor.login].webcheck === true) {
						webcheck = true;
					} else {
						webcheck = false;
					}
				}

				var branch = 'master';

				var lastDate = new Date();
				var events = [];
				if (contributor && contributor.events_url) {
					if (webcheck) {
						branch = 'gh-pages';
					}
					$('#contributors').append('<div class="col-xs-6 col-sm-4 col-md-3 col-lg-2 contributor"><div class="circle" contrib-id="' + contributor.login + '" data-toggle="tooltip" data-placement="bottom" title="Last activity on ' + branch + ' branch was ' + lastDate.toLocaleDateString() + '"></div><div class="thumbnail"><a href="' + contributor.html_url + '"><img src="' + contributor.avatar_url + '" alt=""></a><div class="caption"><h3>' + contributor.login + '<br><small>' + ((contributorDB[contributor.login] && (contributorDB[contributor.login].role) ? contributorDB[contributor.login].role : 'Contributor') + '<br>' + (Math.round(contributor.contributions / totalContributions * 100) == 0 ? '1' : Math.round(contributor.contributions / totalContributions * 100)) + '%') + '</small></h3><p>' + contributorDiv + '</p></div></div></div>');
					
					getJSONAsync('https://api.github.com/repos/Khroki/MCEdit-Unified/commits?author=' + contributor.login + '&sha=' + branch, false, function(events){
						var badgeClass = 'contrib-danger';
						if (events.length > 0) {
							lastDate = new Date(events[0].commit.author.date);
							var timedif = Math.abs((lastDate).getTime() - (new Date()).getTime());
							timedif = timedif / 1000;
							var ACTIVE_COMMITTER_MAX = 432000; //seconds (5 days)
							var RECENT_COMMITTER_MAX = 2678400; //seconds (1 month)
							if (timedif < ACTIVE_COMMITTER_MAX) {
								badgeClass = 'contrib-success';
							} else if (timedif < RECENT_COMMITTER_MAX) {
								badgeClass = 'contrib-old';
							}
						}
						$('div[contrib-id=' + contributor.login + ']').addClass(badgeClass);
					});
				}
			}
			$('[data-toggle="tooltip"]').tooltip()
		}
	</script>
</head>
<body>
	<div class="container">
		<div id="contributors" class="row"></div>
	</div>

	<hr class="hr">
	<div class="footer">
		&copy; 2010-2014 David Rio Vierra (<a href="https://twitter.com/codewarrior0">Codewarrior0</a>).
		&copy; 2014-2015 <a href="http://khroki.github.io/MCEdit-Unified/contributors.html">Khroki and all of the contributers</a>.
		All Rights Reserved to their respective ownership.
	</div>

</body>
</html>
