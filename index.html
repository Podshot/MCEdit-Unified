<!DOCTYPE html>
<html lang="en-US">
<head>
	<title>MCEdit Unified</title>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<script src="js/jquery.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/scripts.js"></script>
	
	<script src="js/marked.js"></script>

	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="css/stylesheet.css">
	<link rel="shortcut icon" href="favicon.ico">

	<script defer src="js/fa-brands.min.js"></script>
	<script defer src="js/fa-regular.min.js"></script>
	<script defer src="js/fa-solid.min.js"></script>
	<script src="js/fontawesome.min.js"></script>

	<meta name="viewport" content="width=device-width, initiass ol-scale=1">

	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-57749723-1', 'auto');
		ga('send', 'pageview');
	</script>

	<!-- Looks for outdated IE browsers -->
	<!--[if lte IE 9]>
		<p class="update">Hey, it looks like you are using an old browser, you can go to <a href="http://browsehappy.com/">Browsehappy.com</a> to get the latest version of your browser and others.</p>
		<[endif]
	-->

	<script>
		function pageTrigger() {
			$('#center_jumbo_row').show();

			var is_OSX = navigator.platform.match(/(Mac)/i);
			var is_Win = (navigator.platform.match(/(Win)/i) && !is_OSX);

			$('.beta-container').hide();

			if (is_OSX) {
				$('#Win-downloads-toplevel').hide();
				$('#Lin-downloads-toplevel').hide();
				$('#OSX-downloads-toplevel').addClass('col-md-offset-4');
				$('.override-platform-specific-downloads-container').show();
			} else if (is_Win) {
				$('#OSX-downloads-toplevel').hide();
				$('#Lin-downloads-toplevel').hide();
				$('#Win-downloads-toplevel').addClass('col-md-offset-4');
				$('.override-platform-specific-downloads-container').show();
			}
			$('.override-platform-specific-downloads').click(function(){
				$('#Win-downloads-toplevel').show();
				$('#Lin-downloads-toplevel').show();
				$('#OSX-downloads-toplevel').show();
				if (is_OSX) {
					$('#OSX-downloads-toplevel').removeClass('col-md-offset-4');
				} else if (is_Win) {
					$('#Win-downloads-toplevel').removeClass('col-md-offset-4');
				}
				$('.beta-container').show();
				$('.override-platform-specific-downloads-container').hide();
				return false;
			});

			var releaseData = getReleaseData();
			var commentJSON = getJSON('comments.json');
			for (var i = 0; i < releaseData.length; i++) {
				var note = marked(releaseData[i].body).replace(/@([a-zA-Z0-9]+)/g,' <a href="http://github.com/$1">@$1</a>');
				var version = releaseData[i].tag_name;
				var title = releaseData[i].name
				if (releaseData[i].prerelease) {
					var releaselabel = 'Pre-release';
				} else {
					var releaselabel = '';
				}
				var releasetimesec = (new Date() - new Date(releaseData[i].published_at)) / 1000;
				var releasetime = new Date(releaseData[i].published_at).toLocaleDateString();
				if (releasetimesec < 60) {
					releasetime = Math.round(releasetimesec) + 's ago';
				} else if (releasetimesec < 60 * 60) {
					releasetime = Math.round(releasetimesec / 60) + 'm ago';
				} else if (releasetimesec < 60 * 60 * 24) {
					releasetime = Math.round(releasetimesec / 60 / 60) + ' hours ago';
				} else if (releasetimesec < 60 * 60 * 24 * 30) {
					releasetime = Math.round(releasetimesec / 60 / 60 / 24) + ' days ago';
				}

				var downloadNames = {
					".Win.64bit.exe": "Windows 64bit",
					".Win.64bit.zip": "Windows 64bit",
					".Win.32bit.exe": "Windows 32bit",
					".Win.32bit.zip": "Windows 32bit",
					".OSX.64bit.zip": "OS X",
					".Lin.Universal.run": "Linux",
					".Universal.run": "Linux",
					".Source.zip": "Source Code"
				}

				function getDownloadName(key) {
					if(key == "translations.zip")
						return "Translations";
					key = key.split(version)[1];
					var res = downloadNames[key];
					if(typeof(res) == "undefined")
						res = key
					return res;
				}

				var versionDownloads = '';

				var totalDownloads = 0

				releaseData[i].assets.sort(function(a, b) {
					return a.download_count - b.download_count;
				});

				for (var x = releaseData[i].assets.length - 1; x >= 0; x--) {
					versionDownloads += getDownloadName(releaseData[i].assets[x].name) + ' - ' + releaseData[i].assets[x].download_count;
					if(x > 0)
						versionDownloads += '<br/>';
					totalDownloads += releaseData[i].assets[x].download_count;
				}

				var commentlink = '';
				if (commentJSON.hasOwnProperty(version)) {
					commentlink = 'Comment <a href="' + commentJSON[version] + '">Here</a>';
				} else {
					commentlink = 'Comments unavailable';
				}

				var downloadLinks = '<div class="row" style="padding-right:15px;">';
				downloadLinks += '<div class="btn-group"><button type="button" class="btn btn-primary btn-xs dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fab fa-windows"></i> <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li><a href="' + getDownload('Win',version,64).browser_download_url + '">64 bit</a></li><li><a href="' + getDownload('Win',version,32).browser_download_url + '">32 bit</a></li></ul></div>';
				downloadLinks += ' <a href="' + getDownload('OSX',version,64).browser_download_url + '" class="btn btn-xs btn-primary"><i class="fab fa-apple"></i></a>';
				downloadLinks += ' <a href="' + getDownload('Lin',version,'Universal').browser_download_url + '" class="btn btn-xs btn-primary"><i class="fab fa-linux"></i></a>';
				downloadLinks += '</div>';

				$('#changelog').append('<div class="row releasenote" version="' + version + '"></div>' + (i < releaseData.length - 1 ? '<hr>' : ''));
				releasenote = $('.releasenote[version="' + version + '"]');
				releasenote.append('<div class="col-md-2 releasenote-title"><div style="padding-right:10px;"><h2 style="display:inline;"><a href="' + releaseData[i].html_url + '">' + version + '</a></h2><br><div class="hide" id="popover-' + version.replace(/\./g, '-') + '">' + versionDownloads + '</div><a class="badge download-badge" rel="popover" data-popover-content="#popover-' + version.replace(/\./g, '-') + '">' + totalDownloads + ' downloads</a><br>' + downloadLinks + commentlink + '<br>' + (releaseData[i].prerelease ? 'Pre-release<br>' : '') + releasetime + '</div></div>');
				releasenote.append('<div class="col-md-10"><p>' + note + '</p></div></div>');
				$('[rel="popover"]').popover({
					container: 'body',
					html: true,
					trigger: 'hover',
					content: function () {
						var clone = $($(this).data('popover-content')).clone(true).removeClass('hide');
						return clone;
					}
				}).click(function(e) {
					e.preventDefault();
				});
			}
			$('#changelog').show();

			$('.download-badge').mousedown(function(event) {
				if (event.which == 3) {
					if (confirm('Reset download count?')) {
						resetCacheForURL(releasesURL);
					}
				}
			});

			var latestRelease = getReleaseData()[0];
			for (var i = 0; i < platforms.length; i++) {
				var assetUniversal = getDownload(platforms[i], latestRelease.tag_name, 'Universal');
				var asset32 = getDownload(platforms[i],latestRelease.tag_name, 32);
				var asset64 = getDownload(platforms[i],latestRelease.tag_name, 64);
				if(assetUniversal) {
					$('#' + platforms[i] + '-downloads').append('<a class="dl btn btn-default" href="' + assetUniversal.browser_download_url + '"><i class="fa fa-cloud-download-alt" ></i> Version ' + latestRelease.tag_name + ' 32/64bit</a><br><br>');
				} else {
					if (asset32) {
						$('#' + platforms[i] + '-downloads').append('<a class="dl btn btn-default" href="' + asset32.browser_download_url + '"><i class="fa fa-cloud-download-alt" ></i> Version ' + latestRelease.tag_name + ' 32bit</a><br><br>');
					}
					if (asset64) {
						$('#' + platforms[i] + '-downloads').append('<a class="dl btn btn-default" href="' + asset64.browser_download_url + '"><i class="fa fa-cloud-download-alt"></i> Version ' + latestRelease.tag_name + ' 64bit</a>');
					}
				}
			}
			for (var i = 0; i < platforms.length; i++) {
				if ($('#' + platforms[i] + '-downloads').children().length == 0) {
					$('#' + platforms[i] + '-downloads').append('<button class="dl btn btn-danger" disabled>No Download Found</button><br><br>');
				}
			}
		}
	</script>
	<style>
		@media (min-width: 992px) {
			.releasenote-title {
				text-align: right;
			}
		}
		@media (max-width: 991px) {
			.releasenote-title {
				text-align: center;
			}
		}
	</style>
</head>
<body>
	<div class="container">
		<div class="row" id="loading_row">
			<div class="col-md-12">
				<p>The page is loading...</p>
			</div>
		</div>
		<div class="row" id="center_jumbo_row" style="display: none;">
			<div class="col-md-12">
				<div class="jumbotron" style="text-align:center;" id="downloads">
					<div class="row">
						<div class="col-md-4" id="OSX-downloads-toplevel">
							<span class="hidden-xs hidden-sm">
								<i class="fab fa-apple fa-5x"></i>
								<br><br><span style="font-size:16pt">macOS</span><br><br>
							</span>
							<span class="hidden-md hidden-lg">
								<i class="fab fa-apple fa-2x"></i>
								<span style="font-size:16pt">&nbsp;macOS<br></span>
							</span>
							<span id="OSX-downloads">

							</span>
						</div>
						<div class="col-md-4" id="Win-downloads-toplevel">
							<span class="hidden-xs hidden-sm">
								<i class="fab fa-windows fa-5x"></i>
								<br><br><span style="font-size:16pt">Windows</span><br><br>
							</span>
							<span class="hidden-md hidden-lg">
								<br><br>
								<i class="fab fa-windows fa-2x"></i>
								<span style="font-size:16pt">&nbsp;Windows<br></span>
							</span>
							<span id="Win-downloads">

							</span>
						</div>
						<div class="col-md-4" id="Lin-downloads-toplevel">
							<span class="hidden-xs hidden-sm">
								<i class="fab fa-linux fa-5x"></i>
								<br><br><span style="font-size:16pt">Linux <span class="label label-warning">Beta</span></span><br><br>
							</span>
							<span class="hidden-md hidden-lg">
								<br><br>
								<i class="fab fa-linux fa-2x"></i>
								<span style="font-size:16pt">&nbsp;Linux <span class="label label-warning">Beta</span><br></span>
							</span>
							<span id="Lin-downloads">

							</span>
						</div>
					</div>

					<!-- Row to reveal all platforms on md/lg -->
					<div class="row hidden-xs hidden-sm override-platform-specific-downloads-container" style="position:absolute;bottom:30px;right:70px;display:none;">
						<div class="col-md-12">
							<i class="fa fa-star"></i> Click <a href="#" class="override-platform-specific-downloads">here</a> to view all versions
						</div>
					</div>

					<!-- Row to see beta -->
					<div class="row hidden-xs hidden-sm beta-container" style="position:absolute;bottom:30px;right:70px;display:none;">
						<div class="col-md-12">
							<i class="fa fa-star"></i> Click <a href="https://github.com/Podshot/MCEdit-Unified-Preview/releases">here</a> for test releases (Windows)
						</div>
					</div>

					<!-- Linux source on md/lg -->
					<div class="row hidden-xs hidden-sm" style="position:absolute;bottom:50px;">
						<div class="col-md-12">
							<i class="fab fa-linux"></i> Linux users can also <a href="http://github.com/Podshot/MCEdit-Unified/releases">run from source.</a>
						</div>
					</div>

					<!-- Pre-anvil on md/lg -->
					<div class="row hidden-xs hidden-sm" style="position:absolute;bottom:30px;">
						<div class="col-md-12">
							<i class="fa fa-history"></i> Pre-Anvil versions can be found at <a href="https://github.com/Khroki/mcedit-old/releases?after=0.1.6build315">this page.</a>
						</div>
					</div>

					<!-- Line-break on sm/xs -->
					<div class="row hidden-md hidden-lg">
						<br>
					</div>

					<!-- Row to reveal all platforms on sm/xs -->
					<div class="row hidden-md hidden-lg override-platform-specific-downloads-container" style="display:none; text-align:center;">
						<div class="col-md-12">
							<i class="fa fa-star"></i> Click <a href="#" class="override-platform-specific-downloads">here</a> to view other platforms
						</div>
					</div>

					<!-- Linux on sm/xs -->
					<div class="row hidden-md hidden-lg" style="text-align:center;">
						<div class="col-md-12">
							<i class="fab fa-linux"></i> Linux users can also <a href="http://github.com/Podshot/MCEdit-Unified/releases">run from source.</a>
						</div>
					</div>

					<!-- Pre-anvil on sm/xs -->
					<div class="row hidden-md hidden-lg" style="text-align:center;">
						<div class="col-md-12">
							<i class="fa fa-history"></i> Pre-Anvil versions can be found at <a href="https://github.com/Khroki/mcedit-old/releases?after=0.1.6build315">this page.</a>
						</div>
					</div>
				</div>
			</div>
			<div id="changelog" style="display:none;">
			</div>
		</div>
	</div>

	<div class="row">
		<div class="col-md-2 col-md-offset-5" style="text-align:center;">
				<ul class="pager">
					<li class="previous"><a href="https://github.com/Podshot/MCEdit-Unified/releases">More Releases <i class="fab fa-github"></i></a></li>
				</ul>
		</div>
	</div>

	<hr class="hr">
	<div class="footer">
		&copy; 2010-2014 David Rio Vierra (<a href="https://twitter.com/codewarrior0">Codewarrior0</a>).
		&copy; 2014-2015 <a href="http://podshot.github.io/MCEdit-Unified/contributors.html">Khroki and all of the contributers</a>.
		All Rights Reserved to their respective ownership.
	</div>

</body>
</html>
